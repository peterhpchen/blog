<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>怎麼寫正規表達式(Regular Expressions)? | LimitlessPing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="在寫程式時常常會需要比對字串，或是從字串中取得目標的結果，在還不知道有正規表達式前，我都是使用像是indexOf之類的字串方法來比對，而我知道了正規表達式後，被這神奇的語法驚呆了，只用了一個表達式就可以實現我寫了幾十行的程式碼，但是對於他那像是天書般的寫法給嚇跑了，現在剛好有時間可以好好研究，這篇用來記錄正規表達式的寫法。">
<meta property="og:type" content="article">
<meta property="og:title" content="怎麼寫正規表達式(Regular Expressions)?">
<meta property="og:url" content="http://peterhpchen.github.io/blog/2018/03/01/regular-expression-pattern/index.html">
<meta property="og:site_name" content="LimitlessPing">
<meta property="og:description" content="在寫程式時常常會需要比對字串，或是從字串中取得目標的結果，在還不知道有正規表達式前，我都是使用像是indexOf之類的字串方法來比對，而我知道了正規表達式後，被這神奇的語法驚呆了，只用了一個表達式就可以實現我寫了幾十行的程式碼，但是對於他那像是天書般的寫法給嚇跑了，現在剛好有時間可以好好研究，這篇用來記錄正規表達式的寫法。">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2018-03-01T17:53:06.000Z">
<meta property="article:modified_time" content="2023-01-17T16:06:20.575Z">
<meta property="article:author" content="Peter Chen">
<meta property="article:tag" content="regular-expression">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="LimitlessPing" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon/favicon.ico">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">LimitlessPing</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜尋"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://peterhpchen.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-regular-expression-pattern" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2018/03/01/regular-expression-pattern/" class="article-date">
  <time class="dt-published" datetime="2018-03-01T17:53:06.000Z" itemprop="datePublished">2018-03-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      怎麼寫正規表達式(Regular Expressions)?
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在寫程式時常常會需要比對字串，或是從字串中取得目標的結果，在還不知道有正規表達式前，我都是使用像是indexOf之類的字串方法來比對，而我知道了正規表達式後，被這神奇的語法驚呆了，只用了一個表達式就可以實現我寫了幾十行的程式碼，但是對於他那像是天書般的寫法給嚇跑了，現在剛好有時間可以好好研究，這篇用來記錄正規表達式的寫法。</p>
<span id="more"></span>

<p>本文使用JavaScript的分隔符: 斜線(<code>/</code>)來表示一段正規表達式，如果使用的語言跟JavaScript的分隔符不同，請自行轉換。</p>
<p>正規表達式由兩種不同的字元組成: <strong>一般字元</strong>及<strong>特殊字元</strong>。</p>
<h2 id="一般字元"><a href="#一般字元" class="headerlink" title="一般字元"></a>一般字元</h2><p>在正規表達式中任何非特殊字元的字元都是一般字元，表達的是<strong>完全相符</strong>的條件，例如<code>/abc/</code>就是要完全符合<code>abc</code>的字串才符合此表達式的條件。</p>
<h2 id="特殊字元"><a href="#特殊字元" class="headerlink" title="特殊字元"></a>特殊字元</h2><p>使用正規表達式定義的特殊字元做<strong>模糊搜尋</strong>，例如<code>/ab*c/</code>會對應到以<code>a</code>為開頭，中間有<strong>零到多個</strong><code>b</code>(因為<code>*</code>這個特殊字元的作用)，最後以<code>c</code>結尾的字串，像是<code>ac</code>或是<code>abbbbbc</code>都會符合。</p>
<p>這些特殊字元可以依照作用不同被分為下面幾類:</p>
<ul>
<li>字元組(Character Sets)</li>
<li>字元族(Character Classes)</li>
<li>反斜線(backslash)</li>
<li>邊界(Boundaries)</li>
<li>多重選項(或)</li>
<li>數量(Quantifiers)</li>
<li>判斷(Assertions)</li>
<li>群組及回溯參照(Grouping and back references)</li>
</ul>
<h3 id="字元組"><a href="#字元組" class="headerlink" title="字元組"></a>字元組</h3><p>如果在同個位置上想要找的不只有一個字串，而是在多個字串中的其中一個就符合條件，這時使用字元組可以達到此需求。</p>
<p>例如<code>[xyz]</code>就是只要<code>x</code>、<code>y</code>、<code>z</code>就會符合目標。</p>
<h4 id="xyz-及-x-z"><a href="#xyz-及-x-z" class="headerlink" title="[xyz]及[x-z]"></a><code>[xyz]</code>及<code>[x-z]</code></h4><p>取得<strong>符合中括號(<code>[]</code>)中其中一個字元</strong>的字元。</p>
<p>如果想要查找的是連續的字母或數字，可以用hypen(<code>-</code>)來設定，例如設定<code>[a-d]</code>的效果跟<code>[abcd]</code>是一樣的。</p>
<p>如果真的要搜尋hypen(<code>-</code>)可以將其放在最前(後)面來查找，例如<code>[abcd-]</code>和<code>[-abcd]</code> 就會符合<code>non-profit</code>中的hyphen(<code>-</code>)。</p>
<p>在中括號內跳脫字元及特殊字元可以不用用反斜線(\)來變為一般字元，例如<code>.</code>在正規表達式中原本代表除了空白字元外的所有字元，但如果寫成<code>[.]</code>就只會符合<code>.</code>這個字元。</p>
<p>字元組的中括號內可以使用字元族(例如<code>\w</code>)來做表示，例如<code>/[a-z.]+/</code>會跟<code>/[\w.]+/</code>一樣符合<code>test.i.ng</code>全部的字串。</p>
<h4 id="xyz"><a href="#xyz" class="headerlink" title="[^xyz]"></a><code>[^xyz]</code></h4><p>取得<strong>不符合中括號(<code>[]</code>)中的任何字元</strong>，其他的特性跟<code>[xyz]</code>相同。</p>
<p>例如<code>[^abc]</code>跟<code>[^a-c]</code>相同，在<code>brisket</code>中因第一個<code>b</code>不符合條件所以會抓到<code>r</code>，而<code>chop</code>也是會抓到<code>h</code>。</p>
<h3 id="字元族"><a href="#字元族" class="headerlink" title="字元族"></a>字元族</h3><p>字元族就是<strong>預定義的字元組</strong>，他會將常用的字元組簡化，讓表達式更加簡潔好記。</p>
<h4 id=""><a href="#" class="headerlink" title="."></a><code>.</code></h4><p>符合<strong>任何除了換行字元外的字元</strong>，跟<code>[^\n\r\u2028\u2029]</code>有相同效果。</p>
<p>例如: <code>/.n/</code>可以在<code>nay, an apple is on the tree</code>中符合<code>an</code>，<code>on</code>，但是不能符合<code>nay</code>，因為<code>nay</code>前面沒有任何字元。</p>
<p>如果放在<code>[]</code>中的話會變成一般字元。</p>
<p>由於<code>.</code>不包含換行字元，如果要包含換行字元可以用<code>[^]</code>來比對。</p>
<h4 id="d"><a href="#d" class="headerlink" title="\d"></a><code>\d</code></h4><p>符合<strong>任何數字字元</strong>的條件，跟<code>[0-9]</code>效果相同。</p>
<p>例如在<code>B2 is the suite number.</code>中用<code>/\d/</code>或<code>/[0-9]/</code>會找到<code>2</code>。</p>
<h4 id="D"><a href="#D" class="headerlink" title="\D"></a><code>\D</code></h4><p>符合<strong>任何非數字字元</strong>的條件，跟<code>[^0-9]</code>效果相同。</p>
<p>例如在<code>B2 is the suite number.</code>中用<code>/\D/</code>或<code>/[^0-9]/</code>會找到<code>B</code>。</p>
<h4 id="w"><a href="#w" class="headerlink" title="\w"></a><code>\w</code></h4><p>符合<strong>所有字母數字的字元</strong>條件，效果同於<code>[A-Za-z0-9_]</code>。</p>
<p>例如<code>/\w/</code>在<code>apple</code>中符合<code>a</code>，在<code>$5.28,</code>中符合<code>5</code>，在<code>3D</code>中符合<code>3</code>。</p>
<h4 id="W"><a href="#W" class="headerlink" title="\W"></a><code>\W</code></h4><p>符合<strong>所有非字母數字的字元</strong>條件，效果同於<code>[^A-Za-z0-9_]</code>。</p>
<p>例如<code>/\w/</code>在<code>50%.</code>中符合<code>%</code>。</p>
<h4 id="s"><a href="#s" class="headerlink" title="\s"></a><code>\s</code></h4><p>符合<strong>所有空白字元</strong>的條件，空白字元包括space, tab, form feed, line feed，它的效果會同於<code>[ \f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]</code>。</p>
<p>例如對<code>foo bar.</code>使用<code>/\s\w*/</code>，<code>\s</code>會對應至空白字元，<code>\w*</code>會對應零到多個字母字元，所以取得的結果會是<code>&quot; bar&quot;</code>。</p>
<h4 id="S"><a href="#S" class="headerlink" title="\S"></a><code>\S</code></h4><p>符合<strong>所有非空白字元</strong>的條件，空白字元包括space, tab, form feed, line feed，它的效果會同於<code>[^ \f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]</code>。</p>
<p>例如對<code>foo bar.</code>使用<code>/\S*/</code>，<code>\S</code>會對應至非空白字元，所以取得的結果會是<code>foo</code>。</p>
<h3 id="f-n-r-t-v"><a href="#f-n-r-t-v" class="headerlink" title="\f, \n, \r, \t, \v"></a><code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code>, <code>\v</code></h3><p>這個系列為符合各個<strong>控制字元</strong>，<code>\f</code>符合form feed(<code>U+000C</code>)條件，<code>\n</code>符合line feed(<code>U+000A</code>)條件， <code>\r</code>符合carriage return(<code>U+000D</code>)條件，<code>\t</code>符合tab(<code>U+0009</code>)條件，<code>\v</code>符合vertical tab(<code>U+000B</code>)條件。</p>
<p><code>\f</code>、<code>\n</code>、<code>\v</code>的差異請參考<a target="_blank" rel="noopener" href="https://stackoverflow.com/a/3098328">這篇</a>。</p>
<p><code>\v</code>可以參考<a target="_blank" rel="noopener" href="https://stackoverflow.com/a/3380554">這篇</a>。</p>
<h4 id="cX"><a href="#cX" class="headerlink" title="\cX"></a><code>\cX</code></h4><p><code>X</code>為A-Z中其中一個字元，用<code>\cX</code>取得<strong>控制字元</strong>，分別代表<code>U+0001</code>到<code>U+001A</code>中的26個控制字元。</p>
<p>例如<code>\cM</code>就是代表<code>U+000D</code>的<code>control+M</code>，也就是<code>\r</code>，而要找<code>\n</code>(Newline)字元，可以用<code>\cJ</code>(<code>U+000A</code>)來取得。</p>
<h4 id="b"><a href="#b" class="headerlink" title="[\b]"></a><code>[\b]</code></h4><p>符合退格字元(Backspace)條件，效果同於<code>\cH</code>(<code>U+0008</code>)。</p>
<h4 id="0"><a href="#0" class="headerlink" title="\0"></a><code>\0</code></h4><p>符合<strong>NULL字元</strong>的條件，注意後面不能接數字，如果接的話會被當作跳脫字元，可以用<code>\x00</code>取代。</p>
<h4 id="XXX"><a href="#XXX" class="headerlink" title="\XXX"></a><code>\XXX</code></h4><p><code>XXX</code>是個<strong>8進位的ISO 8859-1編碼</strong>，數字會在0到377之間。</p>
<p>例如<code>\251</code>是copyright(©)的符號。</p>
<h4 id="xXX"><a href="#xXX" class="headerlink" title="\xXX"></a><code>\xXX</code></h4><p><code>XX</code>是個<strong>16進位的ISO 8859-1編碼</strong>，數字會在0到FF之間。</p>
<p>例如<code>\xA9</code>是copyright(©)的符號。</p>
<h4 id="uXXXX"><a href="#uXXXX" class="headerlink" title="\uXXXX"></a><code>\uXXXX</code></h4><p><code>XXXX</code>是個<strong>16進位的Unicode編碼</strong>。</p>
<p>例如<code>\u00A9</code>會是copyright(©)的符號。</p>
<h4 id="u-XXXX-、-u-XXXXX"><a href="#u-XXXX-、-u-XXXXX" class="headerlink" title="\u{XXXX}、\u{XXXXX}"></a><code>\u&#123;XXXX&#125;</code>、<code>\u&#123;XXXXX&#125;</code></h4><p>在旗標<code>u</code>設置時需要用<code>&#123;&#125;</code>(大括號)括住16進位的Unicode編碼，這個狀態下最多可以表示5碼的Unicode。</p>
<h3 id="反斜線"><a href="#反斜線" class="headerlink" title="反斜線"></a>反斜線</h3><p>接於反斜線(<code>/</code>)後的一般字元變為特殊字元，特殊字元變為一般字元。</p>
<h4 id="一般字元變為特殊字元"><a href="#一般字元變為特殊字元" class="headerlink" title="一般字元變為特殊字元"></a>一般字元變為特殊字元</h4><p>字元<code>b</code>原本是一般字元，用來找尋符合<strong>小寫b</strong>的內容, 但如果是<code>\b</code>的話就代表<strong>字母邊界</strong>，就是用來找尋所有用來切開字母的字元（例如空白, 符號…等）。</p>
<h4 id="特殊字元變為一般字元"><a href="#特殊字元變為一般字元" class="headerlink" title="特殊字元變為一般字元"></a>特殊字元變為一般字元</h4><p>原本<code>/a*/</code>會去找零到多個連續的<code>a</code>，但如果使用<code>/a\*/</code>的話就會找尋符合<code>a*</code>的字串。</p>
<p>反斜線本身也是特殊字元，如果要找尋反斜線請使用<code>\\</code>。</p>
<h3 id="邊界"><a href="#邊界" class="headerlink" title="邊界"></a>邊界</h3><h4 id="-1"><a href="#-1" class="headerlink" title="^"></a><code>^</code></h4><p>在<code>^</code>後的字元為<strong>內容的開頭字元</strong>，例如使用<code>/^A/</code>找尋<code>an A</code>時會沒有符合的結果，但<code>An E</code>就會符合<code>A</code>。</p>
<p>使用<code>m</code>旗標可以使其作用在換行字元後，例如<code>/^A/m</code>找尋<code>an\nA</code>時可以找到<code>A</code>。</p>
<p>當<code>^</code>出現在字元組前會有不同的定義，詳細請看字元組的說明。</p>
<h4 id="-2"><a href="#-2" class="headerlink" title="$"></a><code>$</code></h4><p>在<code>$</code>前面的字元為輸入或是斷行字元前的最後一個字元，例如使用<code>/t$/</code>在<code>eater</code>中不會找到<code>t</code>，但是在<code>eat</code>中會找到<code>t</code>。</p>
<p>使用<code>m</code>旗標可以使其作用在換行字元後，例如<code>/A$/m</code>找尋<code>A\nan</code>時可以找到<code>A</code>。</p>
<h4 id="b-1"><a href="#b-1" class="headerlink" title="\b"></a><code>\b</code></h4><p>在<strong>字母字元前(後)沒有字母字元時</strong>符合此條件，截斷字母字元的字元不會被列入結果中，也可以將截斷的字元想成長度是0的字元。</p>
<p>下面有三個例子:</p>
<ul>
<li><code>/\bm/</code>: 會符合<code>moon</code>中的<code>m</code>，因為<code>m</code>的前面不是字母字元。</li>
<li><code>/oo\b/</code>: 對於<code>moon</code>不會符合任何字串，因為<code>oo</code>後面接的是字母字元<code>n</code>。</li>
<li><code>/oon\b/</code>: 會符合<code>moon</code>中的<code>oon</code>。</li>
<li><code>/\w\b\w/</code>: <code>\b</code>自己不計入結果，但是並不會有一個字母後面同時跟著非字母及字母的情況發生，所以這個表達式不會符合任何條件。</li>
</ul>
<p>字母字元在<a target="_blank" rel="noopener" href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.2.6">ECMAScript</a>上有定義。</p>
<h4 id="B"><a href="#B" class="headerlink" title="\B"></a><code>\B</code></h4><p>在<strong>字母字元前(後)若是字母字元的話</strong>則符合此條件，本身不會是結果的一部分，在它的左右兩邊同時要是字母字元或是非字母字元。</p>
<p>例如對<code>noonday</code>使用<code>/\B../</code>會對應到<code>oo</code>，而對<code>possibly yesterday</code>使用<code>/y\B./</code>會對應到<code>ye</code>。</p>
<h3 id="多重選項-或"><a href="#多重選項-或" class="headerlink" title="多重選項(或)"></a>多重選項(或)</h3><p>符合其中一個條件即為比對成功。</p>
<h4 id="x-y"><a href="#x-y" class="headerlink" title="x|y"></a><code>x|y</code></h4><p>**符合<code>x</code>或<code>y</code>**，例如<code>/green|red/</code>在<code>green apple</code>中符合<code>green</code>，在<code>red apple</code>中符合<code>red</code>。</p>
<p>在寫的時候需要注意順序，<strong>越前面的條件被符合後就不會再去符合之後的條件</strong>，例如對字串<code>b</code>做<code>a*|b</code>會因為符合了empty而傳回空字串，如果使用<code>b|a*</code>就會先符合<code>b</code>而傳回<code>b</code>字母。</p>
<h3 id="數量"><a href="#數量" class="headerlink" title="數量"></a>數量</h3><p>符合某個字元(字串)多次的條件。</p>
<h4 id="x-n"><a href="#x-n" class="headerlink" title="x{n}"></a><code>x&#123;n&#125;</code></h4><p><strong>符合重複<code>x</code>恰好<code>n</code>次的字串</strong>。</p>
<p>例如用<code>a&#123;2&#125;</code>不會符合<code>candy</code>中的<code>a</code>，但會符合<code>caandy</code>中的<code>aa</code>。</p>
<h4 id="x-n-1"><a href="#x-n-1" class="headerlink" title="x{n,}"></a><code>x&#123;n,&#125;</code></h4><p><strong>符合重複<code>x</code>至少<code>n</code>次的字串</strong>。</p>
<p>例如<code>a&#123;2,&#125;</code>會符合<code>aa</code>、<code>aaaa</code>、<code>aaaaa</code>，但不會符合<code>a</code>。</p>
<h4 id="x-n-m"><a href="#x-n-m" class="headerlink" title="x{n,m}"></a><code>x&#123;n,m&#125;</code></h4><p><strong>符合重複<code>x</code>至少<code>n</code>次至多<code>m</code>次的字串</strong>。</p>
<p>例如<code>a&#123;1,3&#125;</code>會符合<code>a</code>、<code>aa</code>、<code>aaa</code>，但不會符合<code>aaaa</code>。</p>
<h4 id="x"><a href="#x" class="headerlink" title="x*"></a><code>x*</code></h4><p><strong>符合<code>x</code>任意數量的字串</strong>，是<code>x&#123;0,&#125;</code>的簡寫。</p>
<p>例如使用<code>/bo*/</code>，在<code>A ghost booooed</code>中會找到<code>boooo</code>，在<code>A bird warbled</code>中會找到<code>b</code>，但<code>A goat grunted</code>找不到符合字串。</p>
<h4 id="x-1"><a href="#x-1" class="headerlink" title="x+"></a><code>x+</code></h4><p><strong>符合<code>x</code>至少1次的字串</strong>，是<code>x&#123;1,&#125;</code>的簡寫。</p>
<p>例如使用<code>/a+/</code>，在<code>candy</code>中找的到<code>a</code>，在<code>caaaaaaandy</code>中找的到所有<code>a</code>所組成的字串，但是在<code>cndy</code>中找不到符合條件。</p>
<h4 id="x-2"><a href="#x-2" class="headerlink" title="x?"></a><code>x?</code></h4><p><strong>符合<code>x</code>零到一次的字串</strong>，是<code>x&#123;0,1&#125;</code>的簡寫。</p>
<p>例如使用<code>/e?le?/</code>，在<code>angel</code>中找的到<code>el</code>，在<code>angle</code>中找到<code>le</code>的字串，在<code>oslo</code>中找到<code>l</code>字串。</p>
<h4 id="xQ"><a href="#xQ" class="headerlink" title="xQ?"></a><code>xQ?</code></h4><p><code>Q</code>為數量特殊字元(<code>&#123;n&#125;</code>、<code>&#123;n,&#125;</code>、<code>&#123;n,m&#125;</code>、<code>*</code>、<code>+</code>、<code>?</code>)。</p>
<p>符合<code>Q</code>定義的數量的<code>x</code>的字串，但是符合最少字串(non-greedy)。</p>
<p>在沒有加<code>?</code>時，會是取符合最多數的結果，加了<code>?</code>後會是<strong>取符合最短字串的結果</strong>。</p>
<p>例如<code>&lt;.*&gt;</code>會符合<code>&lt;foo&gt; &lt;bar&gt;</code>中的<code>&lt;foo&gt; &lt;bar&gt;</code>，但是<code>&lt;.*?&gt;</code>會取到<code>&lt;foo&gt;</code>。</p>
<h3 id="判斷"><a href="#判斷" class="headerlink" title="判斷"></a>判斷</h3><p>利用判斷式來決定要不要匹配條件。</p>
<h4 id="x-y-1"><a href="#x-y-1" class="headerlink" title="x(?=y)"></a><code>x(?=y)</code></h4><p>只有**在<code>x</code>後面緊跟著<code>y</code>時才會取得<code>x</code>**。</p>
<p>例如<code>/Jack(?=Sprat)/</code>一定要<code>Jack</code>後面緊接著<code>Sprat</code>才會取得<code>Jack</code>，而<code>Sprat</code>不會在結果裡面。</p>
<h4 id="x-y-2"><a href="#x-y-2" class="headerlink" title="x(?!y)"></a><code>x(?!y)</code></h4><p>只有在<code>x</code>後面沒有緊跟著<code>y</code>時才會取得<code>x</code>。</p>
<p>例如<code>/\d+(?!\.)/</code>會對應到<code>3.141</code>中的<code>141</code>，但不會對到<code>3</code>。</p>
<h3 id="群組及回溯參照"><a href="#群組及回溯參照" class="headerlink" title="群組及回溯參照"></a>群組及回溯參照</h3><p>群組有下面這些功能:</p>
<ul>
<li>使<strong>數量特殊字元</strong>作用於<strong>字串</strong>上。</li>
<li>群組中匹配的字串會<strong>放入結果</strong>中。</li>
<li>群組中匹配的字串可以<strong>回溯參照</strong>。</li>
</ul>
<h4 id="x-3"><a href="#x-3" class="headerlink" title="(x)"></a><code>(x)</code></h4><p><strong>取得符合<code>x</code>的字串並且放入結果中</strong>。</p>
<p>例如: <code>/(foo) (bar)/</code>在<code>foo bar</code>中會完整符合<code>foo bar</code>(放於結果陣列<code>[0]</code>中)，及群組1的<code>foo</code>(放於結果陣列<code>[1]</code>中)和群組2的<code>bar</code>(放於結果陣列<code>[2]</code>中)。</p>
<p>如果在其後<strong>使用數量特殊字元會作用於整個群組中的字串</strong>上。</p>
<p>例如<code>/foo&#123;1,2&#125;/</code>後面的<code>&#123;1,2&#125;</code>的效果就只有在最後一個<code>o</code>才有效果，而<code>/(foo)&#123;1,2&#125;/</code>則可以抓出重複<code>foo</code>一到兩次的結果。</p>
<h4 id="x-4"><a href="#x-4" class="headerlink" title="(?:x)"></a><code>(?:x)</code></h4><p><strong>取得符合<code>x</code>的字串但不放入結果中</strong>。</p>
<p>如果在其後<strong>使用數量特殊字元會作用於整個群組中的字串</strong>上。</p>
<p>例如<code>/(foo)&#123;1,2&#125;/</code>可以抓出重複<code>foo</code>一到兩次的結果，但我們可能只是要做匹配，並不想要取得此群組結果，所以可以用<code>/(?:foo)&#123;1,2&#125;/</code>使數量特殊字元作用於群組上，但並不會將其放入結果陣列中。</p>
<h4 id="n"><a href="#n" class="headerlink" title="\n"></a><code>\n</code></h4><p>用來表示<strong>回溯參照</strong>: <strong>符合結果陣列中第<code>n</code>個結果</strong>。</p>
<p>例如用<code>/apple(,)\sorange\1/</code>查找<code>apple, orange, cherry, peach.</code>，因為<code>\1</code>會符合結果陣列中的<code>[1]</code>，而<code>[1]</code>是存放<code>,</code>字元(<code>[0]</code>是存放完整結果)，之後的<code>\s</code>會符合空白字元，所以會符合<code>apple, orange,</code>。</p>
<p>再比對html文檔時可以看出回溯參照的優點，例如使用<code>&lt;(\w+)&gt;(.+)&lt;\/\w+&gt;</code>比對<code>&lt;b&gt;Hello&lt;/div&gt;</code>會成功，但html的起始及結束tag要是相同的，這樣的結果不符合需求，而使用<code>&lt;(\w+)&gt;(.+)&lt;\/\1&gt;</code>可以排除這種起始及結束tag不同的情況。</p>
<h2 id="旗標"><a href="#旗標" class="headerlink" title="旗標"></a>旗標</h2><p>正規表達式中的旗標可以設定搜尋的方式，它提供了下面幾個旗標:</p>
<ul>
<li>g: 搜尋完整的內容找出全部的結果。</li>
<li>m: 用^或$的效果在換行時也有用。</li>
<li>i: 不分大小寫。</li>
</ul>
<h3 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h3><p>下面這個範例演繹各個旗標的功能。</p>
<p data-height="265" data-theme-id="0" data-slug-hash="zRJLZa" data-default-tab="js,result" data-user="peterhpchen" data-embed-version="2" data-pen-title="regular expression flags" class="codepen">See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/peterhpchen/pen/zRJLZa/">regular expression flags</a> by Peter Chen (<a target="_blank" rel="noopener" href="https://codepen.io/peterhpchen">@peterhpchen</a>) on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<ul>
<li><code>/[a-z]+/</code>: 因為沒有<code>g</code>旗標，所以取得結果後馬上結束查找。</li>
<li><code>/[a-z]+/g</code>: 加上<code>g</code>旗標會將查找所有內容。</li>
<li><code>/^[a-z]+/g</code>: 因為加了<code>^</code>開頭的條件，所以只會符合整個內容的開頭字串。</li>
<li><code>/^[a-z]+/gm</code>: 加了<code>m</code>旗標後<code>^</code>及<code>$</code>也會作用於換行字元上。</li>
<li><code>/^[a-z]+/gim</code>: 加上<code>i</code>旗標可以不分大小寫查找。</li>
</ul>
<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>正規表達式是個很強大的功能，用來查找字串非常的方便，但可讀性低，需要記憶的特殊字元多，常常讓開發者忽略了這個好用的功能，在此整理了表達式的寫法，使用分類來加強記憶，希望可以增加開發上的使用頻率。</p>
<h2 id="投影片"><a href="#投影片" class="headerlink" title="投影片"></a>投影片</h2><p>在讀書會中使用的投影片:</p>
<iframe src="//slides.com/peter3598768/regular-expression-pattern/embed" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<h2 id="參考"><a href="#參考" class="headerlink" title="參考"></a>參考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://regex101.com/">regex101</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">MDN:Regular_Expressions</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp">MDN:RegExp</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://peterhpchen.github.io/blog/2018/03/01/regular-expression-pattern/" data-id="cld0fgoyp000ghjos90873vpt" data-title="怎麼寫正規表達式(Regular Expressions)?" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/regular-expression/" rel="tag">regular-expression</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2018/03/13/introduce-babel/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Babel介紹
        
      </div>
    </a>
  
  
    <a href="/blog/2018/02/09/javascript-const/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JavaScript中的const</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ES2015/" rel="tag">ES2015</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/activex/" rel="tag">activex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/adobe-xd/" rel="tag">adobe-xd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/asp/" rel="tag">asp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/bash/" rel="tag">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/basicauth/" rel="tag">basicauth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/blogger/" rel="tag">blogger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/bootstrap/" rel="tag">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/chrome-dev-tool/" rel="tag">chrome-dev-tool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/csharp/" rel="tag">csharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/cypress/" rel="tag">cypress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/debug/" rel="tag">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/dotnet/" rel="tag">dotnet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/font/" rel="tag">font</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/github-page/" rel="tag">github-page</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/golang/" rel="tag">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/homebrew/" rel="tag">homebrew</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/icon/" rel="tag">icon</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/iframe/" rel="tag">iframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/javascript-babel/" rel="tag">javascript babel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/jekyll/" rel="tag">jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/jekyll-theme/" rel="tag">jekyll-theme</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/jquery/" rel="tag">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/lua/" rel="tag">lua</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/mdb/" rel="tag">mdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/memory-leak/" rel="tag">memory-leak</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/message-channel/" rel="tag">message-channel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/odbc/" rel="tag">odbc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/open-source/" rel="tag">open-source</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/oracle/" rel="tag">oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/postman/" rel="tag">postman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/postmessage/" rel="tag">postmessage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/regular-expression/" rel="tag">regular-expression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/ruby/" rel="tag">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/svg/" rel="tag">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/tarvis-ci/" rel="tag">tarvis-ci</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vue-cli/" rel="tag">vue-cli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vuejs/" rel="tag">vuejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vuepress/" rel="tag">vuepress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/windows/" rel="tag">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/xml/" rel="tag">xml</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/ES2015/" style="font-size: 10px;">ES2015</a> <a href="/blog/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/blog/tags/activex/" style="font-size: 10px;">activex</a> <a href="/blog/tags/adobe-xd/" style="font-size: 10px;">adobe-xd</a> <a href="/blog/tags/asp/" style="font-size: 10px;">asp</a> <a href="/blog/tags/bash/" style="font-size: 13.33px;">bash</a> <a href="/blog/tags/basicauth/" style="font-size: 10px;">basicauth</a> <a href="/blog/tags/blogger/" style="font-size: 10px;">blogger</a> <a href="/blog/tags/bootstrap/" style="font-size: 10px;">bootstrap</a> <a href="/blog/tags/chrome-dev-tool/" style="font-size: 10px;">chrome-dev-tool</a> <a href="/blog/tags/csharp/" style="font-size: 10px;">csharp</a> <a href="/blog/tags/cypress/" style="font-size: 13.33px;">cypress</a> <a href="/blog/tags/debug/" style="font-size: 10px;">debug</a> <a href="/blog/tags/dotnet/" style="font-size: 10px;">dotnet</a> <a href="/blog/tags/font/" style="font-size: 10px;">font</a> <a href="/blog/tags/git/" style="font-size: 10px;">git</a> <a href="/blog/tags/github/" style="font-size: 13.33px;">github</a> <a href="/blog/tags/github-page/" style="font-size: 13.33px;">github-page</a> <a href="/blog/tags/golang/" style="font-size: 10px;">golang</a> <a href="/blog/tags/homebrew/" style="font-size: 10px;">homebrew</a> <a href="/blog/tags/icon/" style="font-size: 10px;">icon</a> <a href="/blog/tags/iframe/" style="font-size: 13.33px;">iframe</a> <a href="/blog/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/blog/tags/javascript-babel/" style="font-size: 10px;">javascript babel</a> <a href="/blog/tags/jekyll/" style="font-size: 13.33px;">jekyll</a> <a href="/blog/tags/jekyll-theme/" style="font-size: 10px;">jekyll-theme</a> <a href="/blog/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/blog/tags/linux/" style="font-size: 13.33px;">linux</a> <a href="/blog/tags/lua/" style="font-size: 10px;">lua</a> <a href="/blog/tags/mdb/" style="font-size: 10px;">mdb</a> <a href="/blog/tags/memory-leak/" style="font-size: 10px;">memory-leak</a> <a href="/blog/tags/message-channel/" style="font-size: 10px;">message-channel</a> <a href="/blog/tags/odbc/" style="font-size: 13.33px;">odbc</a> <a href="/blog/tags/open-source/" style="font-size: 10px;">open-source</a> <a href="/blog/tags/oracle/" style="font-size: 10px;">oracle</a> <a href="/blog/tags/postman/" style="font-size: 13.33px;">postman</a> <a href="/blog/tags/postmessage/" style="font-size: 10px;">postmessage</a> <a href="/blog/tags/regular-expression/" style="font-size: 10px;">regular-expression</a> <a href="/blog/tags/ruby/" style="font-size: 10px;">ruby</a> <a href="/blog/tags/shell/" style="font-size: 16.67px;">shell</a> <a href="/blog/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/blog/tags/tarvis-ci/" style="font-size: 10px;">tarvis-ci</a> <a href="/blog/tags/test/" style="font-size: 13.33px;">test</a> <a href="/blog/tags/vue/" style="font-size: 13.33px;">vue</a> <a href="/blog/tags/vue-cli/" style="font-size: 10px;">vue-cli</a> <a href="/blog/tags/vuejs/" style="font-size: 10px;">vuejs</a> <a href="/blog/tags/vuepress/" style="font-size: 13.33px;">vuepress</a> <a href="/blog/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/blog/tags/windows/" style="font-size: 13.33px;">windows</a> <a href="/blog/tags/xml/" style="font-size: 10px;">xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/01/">一月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2022/05/09/vuepress-blog/">使用 VuePress 建立個人 blog</a>
          </li>
        
          <li>
            <a href="/blog/2022/05/02/get-directories-in-lua/">使用 Lua 取得目錄中的檔案</a>
          </li>
        
          <li>
            <a href="/blog/2022/05/01/use-dircolors/">使用 dircolors 設定 LS_COLORS</a>
          </li>
        
          <li>
            <a href="/blog/2022/04/30/set-lscolors/">設定 ls 指令輸出的顏色</a>
          </li>
        
          <li>
            <a href="/blog/2022/04/29/shell-sort-by-specific-fields/">在 Shell 中將指令結果依照特定欄位排序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Peter Chen<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>